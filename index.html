<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Illuminati - Matrix Binary Edition</title>
<style>
  * { box-sizing: border-box; }
  body {
    margin: 0;
    height: 100vh;
    background: #010501; /* Fondo base muy oscuro */
    display: flex;
    justify-content: center;
    align-items: center;
    font-family: 'Arial Black', sans-serif;
    overflow: hidden;
  }

  /* --- CANVAS DE FONDO MATRIX --- */
  #matrixCanvas {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: -1; /* Detr√°s de la carta y el personaje */
  }

  /* --- CARTA --- */
  .card-container {
    position: relative;
    width: 380px; 
    height: 590px; 
    background: rgba(0, 0, 0, 0.9); /* Ligeramente transparente para ver el fondo */
    background-image: 
        radial-gradient(circle at 50% 50%, rgba(0, 255, 100, 0.05) 0%, transparent 80%),
        url('https://www.transparenttextures.com/patterns/money.png'); 
    background-size: cover;
    border: 1px solid #0d1a00;
    overflow: hidden;
    box-shadow: 0 0 40px rgba(0, 255, 80, 0.2);
    animation: breathe 8s infinite ease-in-out;
    z-index: 10;
  }

  @keyframes breathe {
    0%, 100% { box-shadow: 0 0 30px rgba(0, 255, 80, 0.1); border-color: #0d1a00; }
    50% { box-shadow: 0 0 60px rgba(0, 255, 100, 0.3); border-color: #1a3300; }
  }

  .all-seeing-eye {
    position: absolute; top: 60px; left: 10%; transform: translateX(-50%);
    width: 280px; opacity: 0.1; z-index: 1;
    filter: sepia(1) saturate(5) hue-rotate(90deg);
    animation: eyeFade 10s infinite alternate ease-in-out;
  }
  @keyframes eyeFade {
    0% { opacity: 0.05; transform: translateX(-50%) scale(0.95); }
    100% { opacity: 0.2; transform: translateX(-50%) scale(1.05); }
  }

  .mystic-hand {
    position: absolute; width: 160px; z-index: 6; opacity: 0.3;
    filter: grayscale(1) contrast(1.2) drop-shadow(0 0 5px #00ff66);
    animation: handMove 12s infinite alternate ease-in-out;
  }
  .hand-left { bottom: 120px; left: -20px; transform: rotate(40deg); }
  .hand-right { bottom: 120px; right: -20px; transform: rotate(-40deg) scaleX(-1); }

  @keyframes handMove {
    0% { transform: translateY(0) rotate(35deg); }
    100% { transform: translateY(-20px) rotate(45deg); }
  }

  #moneyCanvas {
    position: absolute; top: 0; left: 0; width: 100%; height: 100%; z-index: 2; pointer-events: none;
  }

  .player-rating {
    position: absolute; top: 70px; left: 35px; color: #00ff66; z-index: 25;
    text-shadow: 0 0 10px rgba(0, 255, 100, 0.4);
  }
  .rating-value { font-size: 65px; display: block; line-height: 0.8; }
  .rating-pos { font-size: 24px; display: block; color: #fff; letter-spacing: 2px; }

  .player-img-tag {
    position: absolute; top: 65px; right: 5px; width: 260px; height: 310px; 
    object-fit: contain; z-index: 10; filter: drop-shadow(0 5px 15px #000);
  }

  .player-name {
    position: absolute; top: 355px; width: 100%; text-align: center;
    color: #fff; font-size: 22px; text-transform: uppercase;
    z-index: 25; letter-spacing: 5px; text-shadow: 0 0 8px #00ff66;
  }

  .player-stats {
    position: absolute; bottom: 95px; width: 80%; left: 10%;
    display: flex; justify-content: space-around; color: #00ff66; z-index: 25;
  }
  .stat-col { text-align: center; }
  .stat-label { font-size: 14px; display: block; color: #444; }
  .stat-num { font-size: 22px; display: block; font-weight: bold; }
  .divider { width: 1px; background: linear-gradient(to bottom, transparent, #1a3300, transparent); }

  /* --- PERSONAJE EXTERNO --- */
  #walking-sprite {
    position: fixed;
    bottom: 20px;
    left: -150px;
    width: 150px;
    z-index: 100;
    pointer-events: none;
    transition: opacity 2s ease;
  }
</style>
</head>
<body>

<canvas id="matrixCanvas"></canvas>

<img id="walking-sprite" src="fotogramas-alejo/1.png" alt="Animaci√≥n">

<div class="card-container">
  <canvas id="moneyCanvas"></canvas>
  <img src="image.png" class="all-seeing-eye">
  <img src="https://pngimg.com/uploads/hands/hands_PNG905.png" class="mystic-hand hand-left">
  <img src="https://pngimg.com/uploads/hands/hands_PNG905.png" class="mystic-hand hand-right">

  <div class="player-rating">
    <span class="rating-value">99</span>
    <span class="rating-pos">ORDEN</span>
  </div>

  <img src="img1.PNG" alt="Jugador" class="player-img-tag">

  <div class="player-name">Alejandro Escandon</div>

  <div class="player-stats">
    <div class="stat-col"><span class="stat-num">99</span><span class="stat-label">LUX</span></div>
    <div class="divider"></div>
    <div class="stat-col"><span class="stat-num">99</span><span class="stat-label">INF</span></div>
    <div class="divider"></div>
    <div class="stat-col"><span class="stat-num">99</span><span class="stat-label">SEC</span></div>
  </div>
</div>

<script>
// --- FONDO MATRIX BINARIO ---
const mCanvas = document.getElementById('matrixCanvas');
const mCtx = mCanvas.getContext('2d');

mCanvas.width = window.innerWidth;
mCanvas.height = window.innerHeight;

const binChars = ['0', '1'];
const fontSize = 16;
const columns = mCanvas.width / fontSize;
const drops = Array.from({ length: columns }).fill(1);

function drawMatrix() {
  // Fondo semi-transparente para crear el efecto de rastro
  mCtx.fillStyle = 'rgba(1, 5, 1, 0.1)';
  mCtx.fillRect(0, 0, mCanvas.width, mCanvas.height);

  mCtx.fillStyle = '#00ff66'; // Verde Matrix
  mCtx.font = fontSize + 'px monospace';

  for (let i = 0; i < drops.length; i++) {
    const text = binChars[Math.floor(Math.random() * binChars.length)];
    mCtx.fillText(text, i * fontSize, drops[i] * fontSize);

    if (drops[i] * fontSize > mCanvas.height && Math.random() > 0.975) {
      drops[i] = 0;
    }
    drops[i]++;
  }
}

// --- CANVAS INTERNO CARTA (DINERO) ---
const canvas = document.getElementById('moneyCanvas');
const ctx = canvas.getContext('2d');
canvas.width = 380; canvas.height = 590;
const particles = [];
const symbols = ['$', '‚Ç¨', '¬£', 'üëÅ', '‚àÜ'];
for(let i = 0; i < 35; i++) {
  particles.push({
    x: Math.random() * canvas.width,
    y: Math.random() * canvas.height,
    speed: 0.5 + Math.random() * 1.5,
    opacity: 0.1 + Math.random() * 0.3,
    size: 10 + Math.random() * 15,
    symbol: symbols[Math.floor(Math.random() * symbols.length)]
  });
}
function drawMoney() {
  ctx.clearRect(0, 0, canvas.width, canvas.height);
  particles.forEach(p => {
    ctx.fillStyle = `rgba(0, 255, 102, ${p.opacity})`;
    ctx.font = `${p.size}px serif`;
    ctx.fillText(p.symbol, p.x, p.y);
    p.y += p.speed;
    if (p.y > canvas.height + 20) { p.y = -20; p.x = Math.random() * canvas.width; }
  });
}

// --- L√ìGICA DE MOVIMIENTO PERSONAJE ---
const sprite = document.getElementById('walking-sprite');
let currentFrame = 1;
let xPos = -150;
let state = 'walking'; 
let laps = 0;
let animationTimer = 0;

// VARIABLES CONFIGURABLES
const moveSpeed = 1.2;
const totalLapsToFinish = 40;
const saludoRepeatsPerStop = 3; // Repite el saludo 3 veces por parada
let currentSaludoCount = 0;

function animateAll() {
  animationTimer++;

  // Dibujar fondos
  drawMatrix();
  drawMoney();

  // L√≥gica de estados del personaje
  if (state === 'walking') {
    xPos += moveSpeed;
    sprite.style.left = xPos + 'px';

    if (animationTimer % 12 === 0) {
      currentFrame++;
      if (currentFrame > 7) {
        currentFrame = 1;
        state = 'greeting'; // Parar para saludar
        currentSaludoCount = 0;
      }
      sprite.src = `fotogramas-alejo/${currentFrame}.png`;
    }

  } else if (state === 'greeting') {
    // Se queda quieto (xPos no aumenta)
    if (animationTimer % 10 === 0) {
      currentFrame++;
      if (currentFrame > 10) {
        currentFrame = 1;
        currentSaludoCount++;
        
        if (currentSaludoCount >= saludoRepeatsPerStop) {
          state = 'walking';
          laps++;
        }
      }
      sprite.src = `saludo/${currentFrame}.png`;
    }
  }

  // Desvanecimiento final
  if (laps >= (totalLapsToFinish * 25)) {
    sprite.style.opacity = '0';
  }

  // Reinicio de pantalla
  if (xPos > window.innerWidth) {
    xPos = -150;
  }

  requestAnimationFrame(animateAll);
}

// Ajustar canvas de matrix al cambiar tama√±o de ventana
window.onresize = () => {
  mCanvas.width = window.innerWidth;
  mCanvas.height = window.innerHeight;
};

// Iniciar bucle principal
animateAll();

</script>
</body>
</html>